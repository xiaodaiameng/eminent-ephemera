---
// src/layouts/BaseLayout.astro
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';
import Sidebar from '../components/layout/Sidebar.astro';

const { title = '女巫之舞', description = '女巫之舞，为你祈祷⭐' } = Astro.props;
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title} | 女巫之舞</title>
  <meta name="description" content={description}>
  <meta name="keywords" content="花田随笔,个人生活,开发学习">
  
  <!-- Open Graph -->
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:type" content="website">
  <meta property="og:url" content={new URL(Astro.url.pathname, Astro.site).href}>
  
  <!-- Favicon -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  
  <!-- 样式 -->
  <link rel="stylesheet" href="/styles/global.css">
</head>
<body class="min-h-screen bg-base-100">
  <div id="snow-container"></div>
  <div id="fireworks-container"></div>
  
  <div class="drawer lg:drawer-open">
    <input id="sidebar-drawer" type="checkbox" class="drawer-toggle" />
    
    <div class="drawer-content flex flex-col">
      <Header />
      <main class="flex-1 p-4 md:p-6">
        <slot />
      </main>
      <Footer />
    </div>
    
    <div class="drawer-side z-20">
      <label for="sidebar-drawer" class="drawer-overlay"></label>
      <Sidebar />
    </div>
  </div>
  
  <!-- 全局功能脚本 -->
  <script>
    // 初始化全局功能
    document.addEventListener('DOMContentLoaded', () => {
      // 从 localStorage 读取设置
      const showSnow = localStorage.getItem('showSnow') !== 'false';
      const playMusic = localStorage.getItem('playMusic') !== 'false';
      
      if (showSnow) {
        // 触发飘雪
        window.dispatchEvent(new CustomEvent('toggleSnow', { detail: { enable: true } }));
      }
      
      if (playMusic) {
        // 触发音乐播放
        window.dispatchEvent(new CustomEvent('toggleMusic', { detail: { enable: true } }));
      }
    });
  </script>
</body>
</html>