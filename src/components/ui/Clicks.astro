---
// src/components/Clicks.astro
---

<div id="click-container" style="position: fixed; inset: 0; pointer-events: none; z-index: 999999;"></div>

<script>
  // 使用立即执行函数避免冲突
  (function() {
    const container = document.getElementById('click-container');
    
    if (!container) return;
    
    // 颜色列表
    const colors = [
      '#ffe3f7',  // 淡粉色
      '#ffe3f7',
      '#ffe3f7',
      '#c9f5ff',
      'rgba(255, 255, 255, 1)',  // 白色
    ];
    
    // 点击事件监听
    document.addEventListener('click', function(event) {
      // 创建多个粒子
      for (let i = 0; i < 6; i++) {
        createParticle(event.clientX, event.clientY);
      }
    });
    
    function createParticle(x, y) {

      const particle = document.createElement('div');

      const size = Math.random() * 12 + 12;
      const color = colors[Math.floor(Math.random() * colors.length)];
      
      particle.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        background-color: ${color};
        border-radius: 50%;
        left: ${x - size/1.5}px;
        top: ${y - size/1.5}px;
        pointer-events: none;
        opacity: 1;
      `;
      
      // 添加到容器
      container.appendChild(particle);
      
      // 随机移动方向和距离
      const angle = Math.random() * Math.PI * 3;
      const distance = Math.random() * 150 + 80;
      const targetX = x + Math.cos(angle) * distance;
      const targetY = y + Math.sin(angle) * distance;
      
      // 动画
      let startTime = Date.now();
      const duration = 1500; // 1秒
      
      function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // 当前位置
        const currentX = x + (targetX - x) * progress;
        const currentY = y + (targetY - y) * progress;
        
        // 更新位置和透明度
        particle.style.left = (currentX - size/1.5) + 'px';
        particle.style.top = (currentY - size/1.5) + 'px';
        particle.style.opacity = 1 - progress;
        particle.style.transform = `scale(${1 - progress * 0.2})`;
        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          // 动画结束，移除元素
          if (particle.parentNode === container) {
            container.removeChild(particle);
          }
        }
      }
      
      // 开始动画
      requestAnimationFrame(animate);
    }
  })();
</script>