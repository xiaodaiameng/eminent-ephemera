---
// src/components/layout/Sidebar.astro
import '../../styles/sidebar.css';
---

<button 
  id="heart-btn"
  style="
    position: fixed;
    bottom: 8.5rem;
    right: 1rem;
    z-index: 50;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    border: none;
    background: rgba(239, 68, 68, 0.1);
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    box-shadow: 0 2px 10px rgba(255, 230, 230, 0.902);
  "
  aria-label="æŸ¥çœ‹äºº"
  title="æŸ¥çœ‹äºº"
>
  ğŸ
</button>

<!-- ä¸ªäººä¿¡æ¯æ¨¡æ€æ¡† -->
<div id="profile-modal" class="profile-modal">
  <div class="modal-overlay" id="modal-overlay"></div>
  <div class="modal-content">
    <!-- å…³é—­æŒ‰é’® -->
    <button class="modal-close" id="modal-close" aria-label="å…³é—­">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
    
    <!-- å¤´åƒå’Œç”¨æˆ·å -->
    <div class="profile-header">
      <div class="avatar-container">
        <img src="/images/shuangquanmiao.jpg" alt="User Avatar" class="avatar-image"/>
      </div>
      <div class="user-info">
        <h2 class="username">nihao</h2>
        <p class="user-bio">æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ç©ºé—´</p>
      </div>
    </div>
    
    <a href="https://github.com/xiaodaiameng/eminent-ephemera" class="edit-profile-btn" style="display: block; text-align: center;"
    >
    ç‚¹å‡»è·³è½¬è‡³é¡¹ç›® Github åœ°å€</a>
    
    <!-- å‹é“¾éƒ¨åˆ† -->
    <div class="friends-section">
      <div class="section-title">
        <span class="icon">ğŸ“</span>
        <span>å‹é“¾</span>
      </div>
      
      <!-- å¯æ»šåŠ¨çš„å‹é“¾åˆ—è¡¨ -->
      <div class="friends-list-container">
        <div class="friends-list">
          <!-- å‹é“¾1 -->
          <a href="https://blog.ayeez.cn" class="friend-item" target="_blank" rel="noopener">
            <div class="friend-avatar">
              <img src="https://blog.ayeez.cn/imgs/photo.jpg" alt="æœ‹å‹å¤´åƒ" />
            </div>
            <span class="friend-name">Ayeez</span>
          </a>
          
          <!-- å‹é“¾2 -->
          <a href="https://blog.snowy.moe" class="friend-item" target="_blank" rel="noopener">
            <div class="friend-avatar">
              <img src="https://img.snowy.moe/head.png" alt="æœ‹å‹å¤´åƒ" />
            </div>
            <span class="friend-name">é›ªèŒå¤©æ–‡å°</span>
          </a>
          
          <!-- å‹é“¾3 -->
          <a href="#" class="friend-item friend-placeholder">
            <div class="friend-avatar">
              <img src="/images/bigeduodong.webp" alt="æœ‹å‹å¤´åƒ" />
            </div>
            <span class="friend-name">æœ‹å‹3</span>
          </a>
          
          <!-- å‹é“¾4 -->
          <a href="#" class="friend-item friend-placeholder">
            <div class="friend-avatar">
              <img src="/images/bigeduodong.webp" alt="æœ‹å‹å¤´åƒ" />
            </div>
            <span class="friend-name">æœ‹å‹4</span>
          </a>
          
          <!-- å‹é“¾5 -->
          <a href="#" class="friend-item friend-placeholder">
            <div class="friend-avatar">
              <img src="/images/bigeduodong.webp" alt="æœ‹å‹å¤´åƒ" />
            </div>
            <span class="friend-name">æœ‹å‹5</span>
          </a>
          
          <!-- å‹é“¾6 -->
          <!-- <a href="https://baidu.com" class="friend-item" target="_blank" rel="noopener"> -->
           <a href="#" class="friend-item friend-placeholder">
            <div class="friend-avatar">
              <img src="/images/bigeduodong.webp" alt="æœ‹å‹å¤´åƒ" />
            </div>
            <span class="friend-name">æœ‹å‹6</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ€æ¡†ï¼ˆç§»åŠ¨åˆ°æœ€å¤–å±‚ï¼‰ -->
<div id="custom-alert" class="custom-alert">
  <div class="alert-content">
    <div class="alert-header">
      <h3>å‹æƒ…æç¤º</h3>
      <button class="alert-close">Ã—</button>
    </div>
    <div class="alert-body">
      <p>å“å‘€ï¼Œä¸»åŒ…çš„åšå®¢è¿˜æ²¡æœ‰å¾ˆå¤šæœ‹å‹å‘¢ï¼Œå¿«æ¥åŠ å…¥æˆ‘çš„å‹é“¾é˜Ÿä¼å§ï¼</p>
    </div>
    <div class="alert-footer">
      <button class="alert-confirm">å¥½çš„</button>
    </div>
  </div>
</div>

<script>
  // è·å–å…ƒç´ 
  const heartBtn = document.getElementById('heart-btn');
  const profileModal = document.getElementById('profile-modal');
  const modalOverlay = document.getElementById('modal-overlay');
  const modalClose = document.getElementById('modal-close');
  
  // æ˜¾ç¤º/éšè—æ¨¡æ€æ¡†
  function toggleProfileModal() {
    profileModal.classList.toggle('active');
    document.body.style.overflow = profileModal.classList.contains('active') ? 'hidden' : '';
  }
  
  // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
  heartBtn.addEventListener('click', toggleProfileModal);
  
  // å…³é—­æ¨¡æ€æ¡†
  modalOverlay.addEventListener('click', toggleProfileModal);
  modalClose.addEventListener('click', toggleProfileModal);
  
  // ESCé”®å…³é—­æ¨¡æ€æ¡†
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && profileModal.classList.contains('active')) {
      toggleProfileModal();
    }
  });
  
  // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
  profileModal.addEventListener('click', (e) => {
    if (e.target === profileModal) {
      toggleProfileModal();
    }
  });
  
  // è‡ªå®šä¹‰å‘Šè­¦æ¡†é€»è¾‘
  document.addEventListener('DOMContentLoaded', function() {
    const placeholderLinks = document.querySelectorAll('.friend-placeholder');
    const customAlert = document.getElementById('custom-alert');
    const alertClose = customAlert.querySelector('.alert-close');
    const alertConfirm = customAlert.querySelector('.alert-confirm');
    
    placeholderLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        customAlert.classList.add('show');
        document.body.style.overflow = 'hidden';
      });
    });
    
    function closeAlert() {
      customAlert.classList.remove('show');
      document.body.style.overflow = '';
    }
    
    alertClose.addEventListener('click', closeAlert);
    alertConfirm.addEventListener('click', closeAlert);
    
    customAlert.addEventListener('click', function(e) {
      if (e.target === customAlert) {
        closeAlert();
      }
    });
    
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && customAlert.classList.contains('show')) {
        closeAlert();
      }
    });
  });
</script>