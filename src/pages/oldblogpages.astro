---
// src/pages/oldblogpages.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import 'src/styles/oldblogpages.css';
---

<BaseLayout title="博客" description="查看博客">

  <main>
    <article>
      <div class="prose">
        <!-- 每日语录部分 -->
        <div class="quote-container">
          <div class="quote-text" id="daily-quote"></div>
          <hr />
        </div>

        <!-- 每日轮换图片轮播 -->
        <div class="daily-rotating-image">
          <div class="image-container" id="image-container">
            <img id="daily-img" alt="每日图片" loading="lazy" class="daily-image">
            <button class="nav-btn prev-btn" id="prev-btn" aria-label="上一张">‹</button>
            <button class="nav-btn next-btn" id="next-btn" aria-label="下一张">›</button>
          </div>
        </div>
        
        <br>
        
        <!-- 文章列表 -->
        <div class="article-list">
          <a href="/blog/学习" class="article-item">
            <div class="article-image">
              <img src="/images/xiaohei.jpg" alt="学习" />
              <div class="article-title">学习</div>
            </div>
          </a>
          
          <a href="/blog/社交" class="article-item">
            <div class="article-image">
              <img src="/images/fulilian.jpg" alt="社交" />
              <div class="article-title">社交</div>
            </div>
          </a>
          
          <a href="/blog/个体" class="article-item">
            <div class="article-image">
              <img src="/images/aniya.jpg" alt="个体" />
              <div class="article-title">个体</div>
            </div>
          </a>
        </div>
      </div>
    </article>
  </main>
</BaseLayout>

<script>
  (function() {
    'use strict';
    
const quotes = [
      `"Just a little more"`,
      `"我达达的马蹄是个美丽的错误
我不是归人，是个过客"`,
      `"近水楼台先得月，向阳花木易为春。" ——苏麟`,
      `"梦想不会逃跑，逃跑的只有自己。"`,
      `"滕王高阁临江渚，佩玉鸣鸾罢歌舞。
画栋朝飞南浦云，珠帘暮卷西山雨。
闲云潭影日悠悠，物换星移几度秋。
阁中帝子今何在？槛外长江空自流。"`,
      `《回答》
北岛
卑鄙是卑鄙者的通行证，
高尚是高尚者的墓志铭，
看吧，在那镀金的天空中，飘满了死者弯曲的倒影。
冰川纪过去了，为什么到处都是冰凌？
好望角发现了，为什么死海里千帆相竞？
我来到这个世界上，只带着纸、绳索和身影，
为了在审判之前，宣读那些被判决的声音。
告诉你吧，世界，我--不--相--信！
纵使你脚下有一千名挑战者，
那就把我算作第一千零一名。
我不相信天是蓝的，
我不相信雷的回声，
我不相信梦是假的，
我不相信死无报应。
如果海洋注定要决堤，就让所有的苦水都注入我心中，
如果陆地注定要上升，就让人类重新选择生存的峰顶。
新的转机和闪闪星斗，正在缀满没有遮拦的天空。
那是五千年的象形文字，
那是未来人们凝视的眼睛。`,
`"是来去如风，还是疲于奔命"`,
`"天雨虽大不润无根之草，佛法虽宽不度无缘之人"`,
`"论迹不论心"`,
`"我对此无可奉告。"`,
`"天上不会掉馅饼，当心地上有陷阱！"`,
`"当你给大脑一片完整的海洋，它终将学会深潜"`,
`"巫漪丽晚年教授钢琴，门下弟子既有90多岁的老者，也有患自闭症的儿童。回答：“音乐不是用来炫耀才华的，音乐是用来改变生命的。"`,
`"蒲柳之姿，望秋而落；松柏之质，经霜弥茂"——[晋代]顾悦回应简文帝`,
`"权力之争,非我即敌"`,
`"当你凝视深渊时，深渊也在凝视着你。" ——尼采`,
`"海上生明月，天涯共此时。" ——张九龄`,
'"春风得意马蹄疾，一日看尽长安花。" ——孟郊',      
'"采菊东篱下，悠然见南山。" ——陶渊明',
`"曾经沧海难为水，除却巫山不是云。" ——元稹`,
`"一念四海平，一念百花开。"`
];
    
    const imageList = [
      '/images/zou.jpg',
      '/images/girl.jpg',
      '/images/witch.png',
      '/images/welcome.jpg',
      '/images/jiatenghui.jpg',
      '/images/xinmeier.jpg',
      '/images/xisiteliya.jpg',
      '/images/haizeiwang2.jpg',  
      '/images/kelasong.jpg',
      '/images/youyouzi.jpg', 
      '/images/butterflies.jpg',
      '/images/ganlusimili.jpg',
      '/images/xiamu.jpg',
      '/images/haizeiwang.jpg'

    ];
    
    let currentImageIndex = 0;
    let touchStartX = 0;
    
    const dailyImg = document.getElementById('daily-img');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const imageContainer = document.getElementById('image-container');
    const quoteElement = document.getElementById('daily-quote');
    
    function showImage(index) {
      if (index < 0) {
        index = imageList.length - 1;
      } else if (index >= imageList.length) {
        index = 0;
      }
      
      currentImageIndex = index;
      
      if (dailyImg) {
        dailyImg.setAttribute('src', imageList[currentImageIndex]);
        dailyImg.setAttribute('alt', `每日图片 ${currentImageIndex + 1}/${imageList.length}`);
        dailyImg.style.opacity = '0';
        setTimeout(() => { dailyImg.style.opacity = '1'; }, 50);
      }
    }
    
    function loadDailyImage() {
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();
      const date = today.getDate();
      const dayId = year * 10000 + (month + 1) * 100 + date;
      currentImageIndex = dayId % imageList.length;
      showImage(currentImageIndex);
    }
    
    function showPrevImage() {
      showImage(currentImageIndex - 1);
    }
    
    function showNextImage() {
      showImage(currentImageIndex + 1);
    }
    
    function handleTouchStart(event) {
      if (event.touches && event.touches.length > 0) {
        touchStartX = event.touches[0].clientX;
      }
    }
    
    function handleTouchEnd(event) {
      if (!touchStartX) return;
      
      const touchEndX = event.changedTouches[0].clientX;
      const diff = touchStartX - touchEndX;
      
      if (Math.abs(diff) > 50) {
        if (diff > 0) {
          showNextImage();
        } else {
          showPrevImage();
        }
      }
      
      touchStartX = 0;
    }
    
    function setupDailyQuote() {
      if (!quoteElement) return;
      
      const today = new Date();
      const dateString = today.getFullYear().toString() + today.getMonth().toString() + today.getDate().toString();
      const quoteIndex = parseInt(dateString) % quotes.length;
      quoteElement.textContent = quotes[quoteIndex];
    }
    
    function bindEvents() {
      if (prevBtn) {
        prevBtn.addEventListener('click', showPrevImage);
      }
      
      if (nextBtn) {
        nextBtn.addEventListener('click', showNextImage);
      }
      
      document.addEventListener('keydown', (event) => {
        if (event.key === 'ArrowLeft') {
          showPrevImage();
        } else if (event.key === 'ArrowRight') {
          showNextImage();
        }
      });
      
      if (imageContainer) {
        imageContainer.addEventListener('touchstart', handleTouchStart);
        imageContainer.addEventListener('touchend', handleTouchEnd);
      }
    }
    
    function initPage() {
      setupDailyQuote();
      loadDailyImage();
      bindEvents();
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initPage);
    } else {
      initPage();
    }
  })();
</script>